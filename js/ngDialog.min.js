/*! ng-dialog - v0.5.5 (https://github.com/likeastore/ngDialog) */
!function(a,b){"undefined"!=typeof module&&module.exports?"undefined"==typeof angular?(b(require("angular")),module.exports="ngDialog"):(b(angular),module.exports="ngDialog"):"function"==typeof define&&define.amd?define(["angular"],b):b(a.angular)}(this,function(a){"use strict";var b=a.module("ngDialog",[]),c=a.element,d=a.isDefined,e=(document.body||document.documentElement).style,f=d(e.animation)||d(e.WebkitAnimation)||d(e.MozAnimation)||d(e.MsAnimation)||d(e.OAnimation),g="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",h="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",i="ngdialog-disabled-animation",j={html:!1,body:!1},k={},l=[],m=!1;return b.provider("ngDialog",function(){var b=this.defaults={className:"ngdialog-theme-default",disableAnimation:!1,plain:!1,showClose:!0,closeByDocument:!0,closeByEscape:!0,closeByNavigation:!1,appendTo:!1,preCloseCallback:!1,overlay:!0,cache:!0,trapFocus:!0,preserveFocus:!0,ariaAuto:!0,ariaRole:null,ariaLabelledById:null,ariaLabelledBySelector:null,ariaDescribedById:null,ariaDescribedBySelector:null};this.setForceHtmlReload=function(a){j.html=a||!1},this.setForceBodyReload=function(a){j.body=a||!1},this.setDefaults=function(c){a.extend(b,c)};var d,e=0,n=0,o={};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$injector","ElementScroll",function(p,q,r,s,t,u,v,w,x,y,z){var A=[],B={onDocumentKeydown:function(a){27===a.keyCode&&C.close("$escape")},activate:function(a){var b=a.data("$ngDialogOptions");b.trapFocus&&(a.on("keydown",B.onTrapFocusKeydown),A.body.on("keydown",B.onTrapFocusKeydown))},deactivate:function(a){a.off("keydown",B.onTrapFocusKeydown),A.body.off("keydown",B.onTrapFocusKeydown)},deactivateAll:function(b){a.forEach(b,function(b){var c=a.element(b);B.deactivate(c)})},setBodyPadding:function(a){var b=parseInt(A.body.css("padding-right")||0,10);A.body.css("padding-right",b+a+"px"),A.body.data("ng-dialog-original-padding",b),u.$broadcast("ngDialog.setPadding",a)},resetBodyPadding:function(){var a=A.body.data("ng-dialog-original-padding");a?A.body.css("padding-right",a+"px"):A.body.css("padding-right",""),u.$broadcast("ngDialog.setPadding",0)},performCloseDialog:function(b,c){var e=b.data("$ngDialogOptions"),h=b.attr("id"),i=k[h];if(i){if("undefined"!=typeof w.Hammer){var j=i.hammerTime;j.off("tap",d),j.destroy&&j.destroy(),delete i.hammerTime}else b.unbind("click");1===n&&A.body.unbind("keydown",B.onDocumentKeydown),b.hasClass("ngdialog-closing")||(n-=1);var p=b.data("$ngDialogPreviousFocus");p&&p.focus&&p.focus(),u.$broadcast("ngDialog.closing",b,c),n=0>n?0:n,z.enableScrolling(a.element(w)),f&&!e.disableAnimation?(i.$destroy(),b.unbind(g).bind(g,function(){B.closeDialogElement(b,c)}).addClass("ngdialog-closing")):(i.$destroy(),B.closeDialogElement(b,c)),o[h]&&(o[h].resolve({id:h,value:c,$dialog:b,remainingDialogs:n}),delete o[h]),k[h]&&delete k[h],l.splice(l.indexOf(h),1),l.length||(A.body.unbind("keydown",B.onDocumentKeydown),m=!1)}},closeDialogElement:function(a,b){a.remove(),0===n&&(A.html.removeClass("ngdialog-open"),A.body.removeClass("ngdialog-open"),B.resetBodyPadding()),u.$broadcast("ngDialog.closed",a,b)},closeDialog:function(b,c){var d=b.data("$ngDialogPreCloseCallback");if(d&&a.isFunction(d)){var e=d.call(b,c);a.isObject(e)?e.closePromise?e.closePromise.then(function(){B.performCloseDialog(b,c)}):e.then(function(){B.performCloseDialog(b,c)},function(){}):e!==!1&&B.performCloseDialog(b,c)}else B.performCloseDialog(b,c)},onTrapFocusKeydown:function(b){var c,d=a.element(b.currentTarget);if(d.hasClass("ngdialog"))c=d;else if(c=B.getActiveDialog(),null===c)return;var e=9===b.keyCode,f=b.shiftKey===!0;e&&B.handleTab(c,b,f)},handleTab:function(a,b,c){var d=B.getFocusableElements(a);if(0===d.length)return void(document.activeElement&&document.activeElement.blur());var e=document.activeElement,f=Array.prototype.indexOf.call(d,e),g=-1===f,h=0===f,i=f===d.length-1,j=!1;c?(g||h)&&(d[d.length-1].focus(),j=!0):(g||i)&&(d[0].focus(),j=!0),j&&(b.preventDefault(),b.stopPropagation())},autoFocus:function(a){var b=a[0],d=b.querySelector("*[autofocus]");if(null===d||(d.focus(),document.activeElement!==d)){var e=B.getFocusableElements(a);if(e.length>0)return void e[0].focus();var f=B.filterVisibleElements(b.querySelectorAll("h1,h2,h3,h4,h5,h6,p,span"));if(f.length>0){var g=f[0];c(g).attr("tabindex","-1").css("outline","0"),g.focus()}}},getFocusableElements:function(a){var b=a[0],c=b.querySelectorAll(h),d=B.filterTabbableElements(c);return B.filterVisibleElements(d)},filterTabbableElements:function(a){for(var b=[],d=0;d<a.length;d++){var e=a[d];"-1"!==c(e).attr("tabindex")&&b.push(e)}return b},filterVisibleElements:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];(d.offsetWidth>0||d.offsetHeight>0)&&b.push(d)}return b},getActiveDialog:function(){var a=document.querySelectorAll(".ngdialog");return 0===a.length?null:c(a[a.length-1])},applyAriaAttributes:function(a,b){if(b.ariaAuto){if(!b.ariaRole){var c=B.getFocusableElements(a).length>0?"dialog":"alertdialog";b.ariaRole=c}b.ariaLabelledBySelector||(b.ariaLabelledBySelector="h1,h2,h3,h4,h5,h6"),b.ariaDescribedBySelector||(b.ariaDescribedBySelector="article,section,p")}b.ariaRole&&a.attr("role",b.ariaRole),B.applyAriaAttribute(a,"aria-labelledby",b.ariaLabelledById,b.ariaLabelledBySelector),B.applyAriaAttribute(a,"aria-describedby",b.ariaDescribedById,b.ariaDescribedBySelector)},applyAriaAttribute:function(a,b,d,e){if(d&&a.attr(b,d),e){var f=a.attr("id"),g=a[0].querySelector(e);if(!g)return;var h=f+"-"+b;return c(g).attr("id",h),a.attr(b,h),h}},detectUIRouter:function(){try{return a.module("ui.router"),!0}catch(b){return!1}},getRouterLocationEventName:function(){return B.detectUIRouter()?"$stateChangeSuccess":"$locationChangeSuccess"}},C={__PRIVATE__:B,open:function(f){function g(a,b){return u.$broadcast("ngDialog.templateLoading",a),t.get(a,b||{}).then(function(b){return u.$broadcast("ngDialog.templateLoaded",a),b.data||""})}function h(b){return b?a.isString(b)&&D.plain?b:"boolean"!=typeof D.cache||D.cache?g(b,{cache:q}):g(b,{cache:!1}):"Empty template"}function j(){var b=a.element(document.querySelector(".ngdialog-overlay"));b[0]&&(w.innerHeight<p(document.querySelector(".ngdialog"))?b.addClass("scrollbar-visible"):b.removeClass("scrollbar-visible"))}function p(a){return Math.max(a.clientHeight,a.scrollHeight,a.offsetHeight)}var D=a.copy(b),E=++e,F="ngdialog"+E;l.push(F),f=f||{},a.extend(D,f);var G;o[F]=G=s.defer();var H;k[F]=H=a.isObject(D.scope)?D.scope.$new():u.$new();var I,J,K=a.extend({},D.resolve);return a.forEach(K,function(b,c){K[c]=a.isString(b)?y.get(b):y.invoke(b,null,null,c)}),s.all({template:h(D.template||D.templateUrl),locals:s.all(K)}).then(function(b){var e=b.template,f=b.locals;D.showClose&&(e+='<div class="ngdialog-close"></div>');var g=D.overlay?"":" ngdialog-no-overlay";if(I=c('<div id="ngdialog'+E+'" class="ngdialog'+g+'"></div>'),I.html(D.overlay?'<div class="ngdialog-overlay"></div><div class="ngdialog-content" role="document">'+e+"</div>":'<div class="ngdialog-content" role="document">'+e+"</div>"),I.data("$ngDialogOptions",D),H.ngDialogId=F,D.data&&a.isString(D.data)){var h=D.data.replace(/^\s*/,"")[0];H.ngDialogData="{"===h||"["===h?a.fromJson(D.data):D.data,H.ngDialogData.ngDialogId=F}else D.data&&a.isObject(D.data)&&(H.ngDialogData=D.data,H.ngDialogData.ngDialogId=F);if(D.className&&I.addClass(D.className),D.disableAnimation&&I.addClass(i),J=D.appendTo&&a.isString(D.appendTo)?a.element(document.querySelector(D.appendTo)):A.body,B.applyAriaAttributes(I,D),D.preCloseCallback){var k;a.isFunction(D.preCloseCallback)?k=D.preCloseCallback:a.isString(D.preCloseCallback)&&H&&(a.isFunction(H[D.preCloseCallback])?k=H[D.preCloseCallback]:H.$parent&&a.isFunction(H.$parent[D.preCloseCallback])?k=H.$parent[D.preCloseCallback]:u&&a.isFunction(u[D.preCloseCallback])&&(k=u[D.preCloseCallback])),k&&I.data("$ngDialogPreCloseCallback",k)}if(H.closeThisDialog=function(a){B.closeDialog(I,a)},D.controller&&(a.isString(D.controller)||a.isArray(D.controller)||a.isFunction(D.controller))){var l;D.controllerAs&&a.isString(D.controllerAs)&&(l=D.controllerAs);var o=x(D.controller,a.extend(f,{$scope:H,$element:I}),null,l);I.data("$ngDialogControllerController",o)}if(v(function(){var b=document.querySelectorAll(".ngdialog");B.deactivateAll(b),r(I)(H);var c=w.innerWidth-A.body.prop("clientWidth");A.html.addClass("ngdialog-open"),A.body.addClass("ngdialog-open");var d=c-(w.innerWidth-A.body.prop("clientWidth"));d>0&&B.setBodyPadding(d),J.append(I),z.disableScrolling(a.element(w)),I.on("mousewheel DOMMouseScroll touchmove scroll keydown",function(a){a.stopPropagation()}),B.activate(I),D.trapFocus&&B.autoFocus(I),D.name?u.$broadcast("ngDialog.opened",{dialog:I,name:D.name}):u.$broadcast("ngDialog.opened",I)}),m||(A.body.bind("keydown",B.onDocumentKeydown),m=!0),D.closeByNavigation){var p=B.getRouterLocationEventName();u.$on(p,function(){B.closeDialog(I)})}if(D.preserveFocus&&I.data("$ngDialogPreviousFocus",document.activeElement),d=function(a){var b=D.closeByDocument?c(a.target).hasClass("ngdialog-overlay"):!1,d=c(a.target).hasClass("ngdialog-close");(b||d)&&C.close(I.attr("id"),d?"$closeButton":"$document")},"undefined"!=typeof w.Hammer){var q=H.hammerTime=w.Hammer(I[0]);q.on("tap",d)}else I.bind("click",d);return n+=1,u.$watch(function(){j()}),a.element(w).bind("resize",j),C}),{id:F,closePromise:G.promise,close:function(a){B.closeDialog(I,a)}}},openConfirm:function(b){var d=s.defer(),e={closeByEscape:!1,closeByDocument:!1};a.extend(e,b),e.scope=a.isObject(e.scope)?e.scope.$new():u.$new(),e.scope.confirm=function(a){d.resolve(a);var b=c(document.getElementById(f.id));B.performCloseDialog(b,a)};var f=C.open(e);return f.closePromise.then(function(a){return a?d.reject(a.value):d.reject()}),d.promise},isOpen:function(a){var b=c(document.getElementById(a));return b.length>0},close:function(a,b){var d=c(document.getElementById(a));if(d.length)B.closeDialog(d,b);else if("$escape"===a){var e=l[l.length-1];d=c(document.getElementById(e)),d.data("$ngDialogOptions").closeByEscape&&B.closeDialog(d,"$escape")}else C.closeAll(b);return C},closeAll:function(a){for(var b=document.querySelectorAll(".ngdialog"),d=b.length-1;d>=0;d--){var e=b[d];B.closeDialog(c(e),a)}},getOpenDialogs:function(){return l},getDefaults:function(){return b}};return a.forEach(["html","body"],function(a){if(A[a]=p.find(a),j[a]){var b=B.getRouterLocationEventName();u.$on(b,function(){A[a]=p.find(a)})}}),C}]}),b.service("ElementScroll",["$window",function(b){function c(c,d){this.opts=a.extend({handleWheel:!0,handleScrollbar:!0,handleKeys:!0,scrollEventKeys:[32,33,34,35,36,37,38,39,40]},d),this.$container=c,this.$document=a.element(b.document),this.lockToScrollPos=[0,0],this.scrollDisabled=!1;var e=this;this._handleScrollbar=function(){var a=e.$container[0];a===b?a.scrollTo(e.lockToScrollPos[0],e.lockToScrollPos[1]):(a.scrollLeft=e.lockToScrollPos[0],a.scrollTop=e.lockToScrollPos[1])},this._handleKeydown=function(a){for(var b=0;b<e.opts.scrollEventKeys.length;b++)if(a.keyCode===e.opts.scrollEventKeys[b])return void a.preventDefault()},this._handleWheel=function(a){a.preventDefault()}}function d(a,b){var d=parseInt(a.data("_disableScrollId"),10);return d||(g++,d=g,a.data("_disableScrollId",d),a.on("$destroy",function(){f[d]=void 0})),f[d]||(f[d]=new c(a,b)),d}var e,f={},g=1;e=c.prototype,e.disable=function(){var b=this;if(!b.scrollDisabled){if(b.scrollDisabled=!0,b.opts.handleWheel&&b.$container.on("mousewheel DOMMouseScroll touchmove",b._handleWheel),b.opts.handleScrollbar){var c=b.$container[0];b.lockToScrollPos=[a.isNumber(c.scrollX)?c.scrollX:c.scrollLeft,a.isNumber(c.scrollY)?c.scrollY:c.scrollTop],b.$container.on("scroll",b._handleScrollbar)}b.opts.handleKeys&&b.$document.on("keydown",b._handleKeydown)}},e.undo=function(){var a=this;a.scrollDisabled&&(a.scrollDisabled=!1,a.opts.handleWheel&&a.$container.off("mousewheel DOMMouseScroll touchmove",a._handleWheel),a.opts.handleScrollbar&&a.$container.off("scroll",a._handleScrollbar),a.opts.handleKeys&&a.$document.off("keydown",a._handleKeydown))};var h=this;h.disableScrolling=function(a,b){var c=d(a,b);f[c].disable()},h.enableScrolling=function(a,b){var c=d(a,b);f[c].undo()}}]),b.directive("ngDialog",["ngDialog",function(b){return{restrict:"A",scope:{ngDialogScope:"="},link:function(c,d,e){d.on("click",function(d){d.preventDefault();var f=a.isDefined(c.ngDialogScope)?c.ngDialogScope:"noScope";a.isDefined(e.ngDialogClosePrevious)&&b.close(e.ngDialogClosePrevious);var g=b.getDefaults();b.open({template:e.ngDialog,className:e.ngDialogClass||g.className,controller:e.ngDialogController,controllerAs:e.ngDialogControllerAs,bindToController:e.ngDialogBindToController,scope:f,data:e.ngDialogData,showClose:"false"===e.ngDialogShowClose?!1:"true"===e.ngDialogShowClose?!0:g.showClose,closeByDocument:"false"===e.ngDialogCloseByDocument?!1:"true"===e.ngDialogCloseByDocument?!0:g.closeByDocument,closeByEscape:"false"===e.ngDialogCloseByEscape?!1:"true"===e.ngDialogCloseByEscape?!0:g.closeByEscape,overlay:"false"===e.ngDialogOverlay?!1:"true"===e.ngDialogOverlay?!0:g.overlay,preCloseCallback:e.ngDialogPreCloseCallback||g.preCloseCallback})})}}}]),b});